<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>د. هيمن — مساعد تفاعلي للمرضى</title>
  <style>
    :root{ --brand-top:12px; --brand-h:64px;
      --accent:#e11d48; --accent-2:#fb7185; --ink:#0b1220;
      --glass:rgba(255,255,255,.70); --glass-strong:rgba(255,255,255,.86);
      --radius:22px; --shadow:0 22px 70px rgba(0,0,0,.35);
      --ease:cubic-bezier(.22,1,.36,1); --speed:420ms;
      --panel-w:clamp(380px,38vw,640px);
    }
    *{box-sizing:border-box}
    html,body{height:100% padding-top:84px;}
    body{margin:0; font-family:"Tajawal","Cairo","Noto Kufi Arabic",system-ui,Segoe UI,Roboto,Helvetica,Arial; background:#0b1220; color:#f8fafc; overflow:hidden}

    /* ===== Backgrounds (crossfade by scene) ===== */
    .bg{position:fixed; inset:0; width:100%; height:100%; object-fit:cover; object-position:center; opacity:0; transition:opacity 520ms var(--ease); z-index:0; pointer-events:none}
    body.scene-start .bg-start{opacity:1}
    body.scene-faq .bg-faq{opacity:1}
    .veil{ display:none !important; }

    /* ===== Portal transition ===== */
    .portal{position:fixed; inset:0; z-index:9; pointer-events:none; transform:scale(0); opacity:0}
    .portal.show{animation:portalIn .5s var(--ease) both}
    .portal.hide{animation:portalOut .7s var(--ease) both}
    @keyframes portalIn{0%{transform:scale(0); opacity:0; background:radial-gradient(600px 300px at var(--x,50%) var(--y,50%), rgba(225,29,72,0), rgba(225,29,72,0));} 70%{opacity:.9; background:radial-gradient(700px 350px at var(--x,50%) var(--y,50%), rgba(225,29,72,.45), rgba(0,0,0,.95));} 100%{transform:scale(1.6); opacity:.95; background:radial-gradient(800px 400px at var(--x,50%) var(--y,50%), rgba(225,29,72,.45), rgba(0,0,0,.95));} }
    @keyframes portalOut{0%{transform:scale(1.6); opacity:.95; background:radial-gradient(800px 400px at var(--x,50%) var(--y,50%), rgba(225,29,72,.45), rgba(0,0,0,.95));} 100%{transform:scale(0); opacity:0; background:radial-gradient(600px 300px at var(--x,50%) var(--y,50%), rgba(225,29,72,0), rgba(225,29,72,0));} }

    /* ===== Brand (logo.jpg) ===== */
    .brand{position:fixed; top:12px; left:50%; right:auto; transform:translateX(-50%); z-index:30; display:flex; align-items:center; gap:10px; padding:8px 14px; background:rgba(255,255,255,.98); border:2px solid rgba(225,29,72,.35); border-radius:999px; box-shadow:0 14px 40px rgba(0,0,0,.20); backdrop-filter:blur(10px); text-decoration:none; color:var(--ink)}
    .brand img{width:44px; height:44px; border-radius:10px; object-fit:contain; background:#fff}
    .brand .txt b{display:block; font-size:18px; color:var(--accent)}
    .brand .txt span{display:block; font-size:11px; color:#475569}
    body.playing .brand{position:fixed; top:12px; left:50%; right:auto; transform:translateX(-50%); z-index:30; display:flex; align-items:center; gap:10px; padding:8px 14px; background:rgba(255,255,255,.98); border:2px solid rgba(225,29,72,.35); border-radius:999px; box-shadow:0 14px 40px rgba(0,0,0,.20); backdrop-filter:blur(10px); text-decoration:none; color:var(--ink)}

    /* ===== Panels (right side) ===== */
    .panel{
      position:fixed; inset:18px 18px 18px auto; width:var(--panel-w); z-index:3;
      display:flex; flex-direction:column; min-height:0;
      background:linear-gradient(180deg,var(--glass-strong),rgba(255,255,255,.78));
      border:1px solid rgba(0,0,0,.08); border-radius:var(--radius);
      box-shadow:var(--shadow); backdrop-filter:blur(12px); color:var(--ink);
      transform:translateX(36px) rotateY(-8deg) translateZ(0); opacity:0; pointer-events:none;
      transition:transform var(--speed) var(--ease), opacity var(--speed) var(--ease);
      transform-origin:right center;
    }
    .panel.active{transform:translateX(0) rotateY(0); opacity:1; pointer-events:auto}
    .panel header{padding:14px 16px 6px; border-bottom:1px solid rgba(0,0,0,.06)}
    .panel h1{margin:0 0 6px; font-size:30px; font-weight:900; color:#0b1220}
    .panel .content{flex:1; min-height:0; display:flex; flex-direction:column; overflow:hidden; padding:12px}
    .toolbar{display:flex; gap:8px; flex-wrap:wrap; padding:6px 16px 12px}
    .btn{appearance:none; border:none; cursor:pointer; border-radius:999px; padding:12px 16px; font-weight:900; font-size:16px; background:#fff; color:#0b1220; border:1px solid rgba(0,0,0,.08); box-shadow:0 12px 30px rgba(0,0,0,.12); transition:transform .08s var(--ease), box-shadow .2s var(--ease)}
    .btn[disabled]{opacity:.6; cursor:not-allowed}
    .btn:hover:not([disabled]){transform:translateY(-1px)}

    /* ===== Animated ECG (exact start-menu shape) ===== */
    .ecg{display:flex; align-items:center; justify-content:center; height:120px; margin:6px 0 0}
    .ecg svg{display:block; width:min(760px, 92%); height:100%}
    .ecg .sweep{mask:url(#reveal)}
    .scan{animation: scan 2.6s linear infinite}
    @keyframes scan { from { transform:translateX(-240px); } to { transform:translateX(1040px); } }

    /* ===== Start options ===== */
    .option{display:block; width:100%; text-align:start; padding:16px; margin:10px 0; border-radius:16px; border:none; cursor:pointer;
      background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; font-weight:900; font-size:19px;
      box-shadow:0 12px 30px rgba(225,29,72,.28); transition:transform .18s var(--ease), filter .18s var(--ease);
      position:relative; overflow:hidden;
    }
    .option small{display:block; font-size:12px; opacity:.9}
    .option:hover{transform:translateY(-1px); filter:brightness(1.05)}
    .option .ripple{position:absolute; border-radius:999px; transform:scale(0); opacity:.45; background:radial-gradient(circle, rgba(255,255,255,.6) 0%, rgba(255,255,255,.25) 35%, transparent 70%); pointer-events:none; animation:ripple .55s ease-out forwards}
    @keyframes ripple{to{transform:scale(12); opacity:0}}

    /* ===== All-questions list (animated reveal) ===== */
    .listWrap{max-height:0; opacity:0; transform:translateY(-6px); transition:max-height var(--speed) var(--ease), opacity var(--speed) var(--ease), transform var(--speed) var(--ease); overflow:hidden; will-change:max-height, opacity, transform; }
    .listWrap.open{ flex:1; opacity:1; transform:none; overflow:auto; max-height:none }
    .list{list-style:none; margin:0; padding:0; display:grid; gap:10px padding-bottom:18px}
    .q{ padding:16px; border-radius:16px; background:#fff; color:var(--ink); border:2px solid var(--accent); font-size:18px; font-weight:900; text-align:start; cursor:pointer; position:relative; overflow:hidden; box-shadow:0 12px 30px rgba(0,0,0,.12); transform:translateX(16px); opacity:0; transition:transform .3s var(--ease), opacity .3s var(--ease); }
    .list.ready .q{transform:none; opacity:1}
    .q small{ color:#444; font-weight:700; font-size:12px }
    .q .ripple{position:absolute; border-radius:999px; transform:scale(0); opacity:.45; background:radial-gradient(circle, rgba(255,255,255,.6) 0%, rgba(255,255,255,.25) 35%, transparent 70%); pointer-events:none; animation:ripple .55s ease-out forwards}

    /* ===== Bottom dialog choices (2x2 at the base) ===== */
    .dialog{position:fixed; left:50%; bottom:18px; transform:translateX(-50%); z-index:2; width:min(1100px, 92vw); pointer-events:none; transition:opacity var(--speed) var(--ease), transform var(--speed) var(--ease);}
    .dialog.hidden{opacity:0; transform:translateX(-50%) translateY(8px); pointer-events:none}
    .dialog .wrap{display:grid; grid-template-columns:repeat(2,1fr); gap:12px; pointer-events:auto}
    .choice{ font-size:22px; padding:16px; padding:16px; border-radius:16px;  color:var(--ink); font-weight:900; font-size:18px; border:none; text-align:start; cursor:pointer; position:relative; overflow:hidden; box-shadow:0 12px 30px rgba(225,29,72,.28); transform:translateY(10px) scale(.98); opacity:0; transition:transform .35s var(--ease), opacity .35s var(--ease) background:#fff; border:2px solid var(--accent); text-shadow:none;}
    .dialog.ready .choice{ font-size:22px; padding:16px; transform:none; opacity:1}
    .choice .ripple{position:absolute; border-radius:999px; transform:scale(0); opacity:.45; background:radial-gradient(circle, rgba(255,255,255,.6) 0%, rgba(255,255,255,.25) 35%, transparent 70%); pointer-events:none; animation:ripple .55s ease-out forwards}
    @media (max-width:700px){ .dialog .wrap{grid-template-columns:1fr} }

    /* ===== Player overlay ===== */
    .player{position:fixed; inset:0; background:#000; display:grid; place-items:center; z-index:8; opacity:0; pointer-events:none; transition:opacity 380ms var(--ease)}
    .player.active{opacity:1; pointer-events:auto}
    .player video{width:100%; height:100%; object-fit:cover}

    /* Controls */
    .controls{position:fixed; top:18px; right:calc(var(--panel-w) + 28px); z-index:10; display:flex; gap:10px}
    .controls .btn{display:none}
    body.playing .controls .btn{display:inline-flex}

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      .scan{animation:none}
      .panel,.player,.bg,.q,.choice,.listWrap{max-height:0; opacity:0; transform:translateY(-6px); transition:max-height var(--speed) var(--ease), opacity var(--speed) var(--ease), transform var(--speed) var(--ease); overflow:hidden; will-change:max-height, opacity, transform; flex:1 }
      .portal{display:none}
    }
    @media (max-width: 640px){
    #contactCard{ 
      left: 12px; right: 12px; max-width: none;
      top: calc(var(--brand-top) + var(--brand-h) + 10px);
    }
      .brand{position:fixed; top:12px; left:50%; right:auto; transform:translateX(-50%); z-index:30; display:flex; align-items:center; gap:10px; padding:8px 14px; background:rgba(255,255,255,.98); border:2px solid rgba(225,29,72,.35); border-radius:999px; box-shadow:0 14px 40px rgba(0,0,0,.20); backdrop-filter:blur(10px); text-decoration:none; color:var(--ink)}
.brand img{height:40px; width:auto; display:block}
.brand .txt{display:flex; flex-direction:column; line-height:1}
.brand .txt b{font-size:14px; color:#0b1220}
.brand .txt span{font-size:11px; color:#3a3a3a}
      .panel h1{font-size:24px}
    }
  
/* === FIX PATCH v10 === */
body.scene-start .dialog{ display:none !important; }

/* Slide-in list from right and staggered items */
.listWrap{max-height:0; opacity:0; transform:translateY(-6px); transition:max-height var(--speed) var(--ease), opacity var(--speed) var(--ease), transform var(--speed) var(--ease); overflow:hidden; will-change:max-height, opacity, transform; flex:1 }
.listWrap.open{ flex:1; opacity:1; transform:none; overflow:auto }

.q{
  transform:translateX(16px);
  opacity:0;
  transition:transform .3s var(--ease), opacity .3s var(--ease);
}
.list.ready .q{ transform:none; opacity:1; }


/* === FABs for 'choices' mode === */
.fabWrap{
  position:fixed; inset:auto 18px 18px auto; display:flex; gap:10px; z-index:40;
  opacity:0; transform:translateY(8px); pointer-events:none;
  transition:opacity var(--speed) var(--ease), transform var(--speed) var(--ease);
}
.fab{
  appearance:none; border:none; width:48px; height:48px; border-radius:999px;
  background:linear-gradient(180deg,#ffffff,#f3f3f3);
  box-shadow:0 10px 30px rgba(0,0,0,.25), inset 0 0 0 1px rgba(0,0,0,.08);
  color:#0b1220; font-size:20px; font-weight:900; cursor:pointer;
}
body.scene-faq.mode-choices .fabWrap{ opacity:1; transform:none; pointer-events:auto; }
body.scene-faq.mode-choices #faqPanel{ display:none !important; } /* hide right panel entirely in choices */


/* === v15: Single-scroll FAQ === */
#faqPanel .content{ overflow:hidden; }
/* Increase inner list area height a bit and keep only inner scroll */
#faqPanel .listWrap.open{ flex:1; opacity:1; transform:none; overflow:auto }


/* ECG styling */
.ecgWrap{display:flex; justify-content:center; align-items:center; padding:8px 16px; }
.ecg{display:block; width:min(780px, 92%); height:120px; margin:8px auto;}



/* Ornaments: subtle, behind content */
.ornaments{position:fixed; inset:0; pointer-events:none; z-index:1}
.ornaments .deco{position:absolute; filter:blur(.0px)}
.ornaments .heart{top:20%; left:5%; width:92px}
.ornaments .scalpel{bottom:10%; right:7%; width:120px}
.ornaments .steth{top:8%; right:12%; width:85px}


/* v17 ornaments */
.ornaments{position:fixed; inset:0; pointer-events:none; z-index:2}
.ornaments .deco{position:absolute}
.ornaments .heart{top:18%; left:5%; width:96px}
.ornaments .scalpel{bottom:9%; right:7%; width:124px}
.ornaments .steth{top:9%; right:12%; width:90px}


/* === ECG SIZE OVERRIDE (v18) === */
.ecg{height:170px !important; margin:10px auto !important; display:flex; align-items:center; justify-content:center;}
.ecg svg{width:min(1024px, 96%) !important; height:100% !important}


/* === Cardiac-surgery theme additions (v18) === */
/* Subtle cardio grid */
body::before{
  content:""; position:fixed; inset:0; z-index:0; pointer-events:none;
  background:
    radial-gradient(circle at 50% 20%, rgba(225,29,72,.10), transparent 40%),
    repeating-linear-gradient(90deg, rgba(255,255,255,.035) 0 1px, transparent 1px 60px),
    repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 60px);
}

/* Gentle pulse glow behind the brand */
.brand::after{
  content:""; position:absolute; inset:-6px; border-radius:999px; z-index:-1;
  box-shadow:0 0 0 0 rgba(225,29,72,.28);
  animation:brandPulse 2.4s ease-in-out infinite;
}
@keyframes brandPulse{ 0%{box-shadow:0 0 0 0 rgba(225,29,72,.28)} 70%{box-shadow:0 0 0 18px rgba(225,29,72,0)} 100%{box-shadow:0 0 0 0 rgba(225,29,72,0)} }

/* Extra ornaments placement */
.ornaments .stent{bottom:20%; left:8%; width:120px}
.ornaments .needle{top:32%; right:18%; width:100px; transform:rotate(-12deg)}


  /* ensure it never blocks clicks below */
  }
  #contactCard *{ color: var(--ink); }
  #contactCard .title{
    display:flex; align-items:center; gap:.5rem;
    font-weight:700; font-size: clamp(14px, 1.15vw, 17px);
    margin-bottom:.25rem;
  }
  #contactCard .title .dot{
    width:.6rem; height:.6rem; border-radius:999px;
    background: linear-gradient(145deg, var(--accent), var(--accent-2));
    box-shadow: 0 0 12px rgba(225,29,72,.45);
  }
  #contactCard .body{ font-size: clamp(12px, 1.02vw, 15.5px); }
  #contactCard .em{ font-weight:600 }
  #contactCard .row{ display:flex; align-items:center; gap:.5rem; margin-top:.25rem; }
  
  
  
  
  #contactCard .loc{ opacity:.9; font-size:.92em; margin-top:.35rem; }
  
  
  /* Avoid overlap on very narrow screens: scale down & raise left inset */
  @media (max-width: 640px){
    #contactCard{ 
      left: 12px; right: 12px; max-width: none;
      top: calc(var(--brand-top) + var(--brand-h) + 10px);
    }
  }
  @media (max-height: 540px){
    #contactCard{ transform: scale(.92); transform-origin: bottom left; }
  }

</style>

<style id="v18-overrides">
/* Guarantee ECG is larger in all menus */
.ecg{height:220px !important; margin:10px auto !important; display:flex; align-items:center; justify-content:center;}
.ecg svg{width:min(1280px, 96%) !important; height:100% !important}

/* Single inner scroll: only the list scrolls */
.panel .content{overflow:hidden !important}
.listWrap.open{overflow:auto !important}
#list{padding-bottom:28px !important}

/* Ensure visibility */
.listWrap[aria-hidden="false"], .listWrap.open{opacity:1 !important}
</style>


<style id="v18b-overrides">
/* Move logo (brand) to top-left on all viewports */
.brand{
  left:16px !important;
  right:auto !important;
  transform:none !important;
  top:12px !important;
}

/* Remove the big heart ornament on the left side of the background */
.ornaments .heart{ display:none !important; }
</style>


<style id="v18c-overrides">
/* Remove red ornaments on the left */
.ornaments .stent, .ornaments .needle { display:none !important; }
/* Neutralize red glow overlay in background */
body::before{ 
  background:
    /* removed radial red glow */ 
    repeating-linear-gradient(90deg, rgba(255,255,255,.035) 0 1px, transparent 1px 60px),
    repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 60px) !important;
}

/* ECG: nicer look + less spacing */
header{ padding:12px 16px 4px !important; }
.ecg{ height:160px !important; margin:6px auto 4px !important; display:flex; align-items:center; justify-content:center; }
.ecg svg{ width:min(1100px, 96%) !important; height:100% !important }

/* Beautify the sweep line with glow and subtle motion */
.ecg .sweep{
  filter: drop-shadow(0 0 6px rgba(225,29,72,.35));
  stroke-width:4.5 !important;
  stroke-linecap:round; stroke-linejoin:round;
  stroke-dasharray:6 10;
  animation:ecgDash 3.6s linear infinite;
}
@keyframes ecgDash{ to{ stroke-dashoffset:-180; }}

/* Tighten space above the questions list */
#faqPanel header h1{ margin:0 0 2px 0 !important; }
#faqPanel .ecg{ margin-bottom:2px !important; }
</style>


<style id="v18d-overrides">
/* ECG: solid line (no dots), smooth + subtle glow */
.ecg .sweep{
  stroke-dasharray: none !important;
  stroke-dashoffset: 0 !important;
  animation: none !important;
  filter: drop-shadow(0 0 8px rgba(225,29,72,.35));
  stroke-width: 4.5 !important;
  stroke-linecap: round !important;
  stroke-linejoin: round !important;
}
/* Baseline faded slightly so the red sweep stands out */
.ecg svg path:not(.sweep){ stroke-opacity: .35; }
/* Better antialiasing */
.ecg svg{ shape-rendering: geometricPrecision; }
.ecg svg path{ vector-effect: non-scaling-stroke; }
</style>


<style id="v18e-overrides">
/* Pin toolbar (Show All / Show Choices / Back to Start) to top-right inside the right panel header */
#faqPanel > header{ position:relative !important; padding-top:52px !important; }
#faqPanel > header .toolbar{
  position:absolute !important;
  top:10px !important;
  inset-inline-end:16px !important; /* logical 'right' for RTL/LTR */
  right:16px !important; /* fallback */
  display:flex !important;
  gap:8px !important;
  flex-wrap:nowrap !important;
  z-index:5 !important;
}

/* Ensure floating playback controls are at TOP-right of the viewport (not bottom) */
.controls{
  position:fixed !important;
  top:18px !important;
  right:calc(var(--panel-w) + 28px) !important;
  bottom:auto !important;
}

/* Small visual tweak so buttons fit nicely at the top */
#faqPanel > header .toolbar .btn{ padding:8px 10px !important; font-size:14px !important; }

</style>


<style id="v18f-overrides">
/* Move the 2 circular FAB buttons (All Questions + Back) to TOP-RIGHT on the 4-choices page */
.fabWrap{
  position:fixed !important;
  inset:18px 18px auto auto !important; /* top:18px; right:18px */
  display:flex !important; gap:10px !important; z-index:40 !important;
  opacity:1 !important; transform:none !important; pointer-events:auto !important;
}
/* Make sure they stay above the dialog */
.dialog{ z-index:2 !important; }
.fab{ width:50px !important; height:50px !important; }
</style>


<style id="v18g-overrides">
/* Default: hide FABs everywhere */
.fabWrap{
  opacity:0 !important;
  transform:translateY(8px) !important;
  pointer-events:none !important;
}

/* Only show & position FABs on the 4-choices page */
.mode-choices .fabWrap{
  position:fixed !important;
  inset:18px 18px auto auto !important; /* top-right */
  display:flex !important;
  gap:10px !important;
  z-index:40 !important;
  opacity:1 !important;
  transform:none !important;
  pointer-events:auto !important;
}

/* Extra safety: explicitly hide in list/none modes */
.mode-list .fabWrap, .mode-none .fabWrap{
  opacity:0 !important; pointer-events:none !important; transform:translateY(8px) !important;
}
</style>


<style id="v18i-overrides">
/* ===== Global frame for every page ===== */
body::after{
  content:""; position:fixed; inset:14px; border:2px solid rgba(255,255,255,.12);
  border-radius:26px; box-shadow:0 10px 40px rgba(0,0,0,.24) inset;
  pointer-events:none; z-index:1;
}

/* ===== Start menu only: better use of right-side space ===== */
body.scene-start #startPanel > header{ padding-bottom:8px !important; }
body.scene-start #startPanel .content{
  display:grid !important;
  align-content:center !important;
  justify-items:stretch !important;
  gap:14px !important;
  padding:14px !important;
}

/* Larger, card-like start options */
body.scene-start #startPanel .option{
  padding:20px 18px !important;
  min-height:128px !important;
  font-size:20px !important;
  border-radius:18px !important;
  background:linear-gradient(135deg,#fff,#f8fafc) !important;
  color:#0b1220 !important;
  border:1px solid rgba(0,0,0,.08) !important;
  box-shadow:0 12px 32px rgba(0,0,0,.12) !important;
  display:flex !important; align-items:center !important; justify-content:space-between !important;
}

/* Keep the original accent as a slim left border for brand consistency */
body.scene-start #startPanel .option::before{
  content:""; display:block; width:6px; height:70%; border-radius:6px;
  background:linear-gradient(180deg,var(--accent),var(--accent-2));
  margin-inline-end:12px;
}

/* The small subtext visually lighter */
body.scene-start #startPanel .option small{
  display:block; font-weight:500; color:#334155; opacity:.85; margin-top:6px;
}

/* Add a chevron indicator */
body.scene-start #startPanel .option::after{
  content:"›"; font-weight:900; font-size:28px; opacity:.35; margin-inline-start:10px;
}

/* Hover/active states */
body.scene-start #startPanel .option:hover{ transform:translateY(-2px); box-shadow:0 16px 42px rgba(0,0,0,.16) !important; }
body.scene-start #startPanel .option:active{ transform:translateY(0); }

/* Do NOT touch the 4-choices page (#dialog) styles */
</style>


<style id="v18j-overrides">
/* === Start menu: make the two choices consistent and better-fitting === */
body.scene-start #startPanel .option{
  /* sizing */
  padding:14px 16px !important;
  min-height:auto !important;
  /* typography */
  font-size:18px !important;
  font-weight:600 !important;
  line-height:1.4 !important;
  white-space:normal !important;
  /* layout */
  display:flex !important;
  align-items:flex-start !important;
  gap:12px !important;
  justify-content:flex-start !important;
}
body.scene-start #startPanel .option small{
  display:block !important;
  font-size:14px !important;
  line-height:1.5 !important;
  margin-top:4px !important;
  color:#334155 !important;
  opacity:.9 !important;
}

/* slim brand accent bar */
body.scene-start #startPanel .option::before{
  height:56% !important;
  margin-inline-end:10px !important;
}

/* chevron to the far edge, vertically centered; smaller so text feels proportional */
body.scene-start #startPanel .option::after{
  margin-inline-start:auto !important;
  align-self:center !important;
  font-size:22px !important;
  opacity:.4 !important;
}
</style>


<style id="v18k-overrides">
/* ===== Hide the two circular buttons (FABs) during video playback ===== */
.playing .fabWrap{
  opacity:0 !important;
  pointer-events:none !important;
  transform:translateY(8px) !important;
}

/* ===== Start menu: fill empty space on the right panel with themed ornaments (CSS-only) ===== */
body.scene-start #startPanel .content{
  position:relative !important;
}

/* Ensure buttons sit above the ornaments */
body.scene-start #startPanel .option{ position:relative !important; z-index:1 !important; }

/* Two layered, faint SVG ornaments: heart outline + scalpel + suture needle */
/* Using data-URI SVGs to avoid DOM changes */
body.scene-start #startPanel .content::after{
  content:"";
  position:absolute; inset:0; pointer-events:none; z-index:0;
  background-repeat:no-repeat, no-repeat, no-repeat;
  background-size: 140px 140px, 120px 120px, 130px 130px;
  background-position:
      bottom 24px left 18px,   /* heart */
      bottom 32% right 22px,   /* scalpel */
      top 18% right 36px;      /* needle */
  opacity:.18;
  /* Heart outline */
  background-image:
    url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'><path d='M12 21s-6.7-4.3-9.3-7S.7 5.7 4.4 4A5.6 5.6 0 0112 6a5.6 5.6 0 017.6-2C23.3 5.7 21.3 12 21.3 12s-6.7 4.7-9.3 9z' fill='none' stroke='%23e11d48' stroke-width='1.5' stroke-linecap='round' stroke-linejoin='round'/></svg>"),
    /* Scalpel */
    url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M5 50 L26 29 L35 38 L14 59 Z M54 10 L36 28 L31 23 L49 5 Z\" fill=\"%230b1220\" fill-opacity=\"0.55\"/></svg>'),
    /* Suture needle */
    url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path d=\"M6 44 Q32 10 58 18\" fill=\"none\" stroke=\"%230b1220\" stroke-opacity=\"0.55\" stroke-width=\"3\" stroke-linecap=\"round\"/><path d=\"M58 18 l-9 -3 l6 8 z\" fill=\"%230b1220\" fill-opacity=\"0.55\"/></svg>');
}

/* Optional: subtler overall intensity on very small screens */
@media (max-width: 520px){
  body.scene-start #startPanel .content::after{ opacity:.14; background-size: 110px 110px, 96px 96px, 100px 100px; }
}
</style>


<style id="v18l-overrides">
/* ===== START MENU ONLY: center stack & make cards larger ===== */
body.scene-start #startPanel .content{
  /* center the two choices vertically within the panel */
  display:grid !important;
  grid-auto-rows:minmax(120px,auto) !important;
  place-content:center stretch !important; /* vertical + horizontal centering of the grid area */
  gap:16px !important;
  padding:18px !important;
  position:relative !important;
}

/* Card sizing and typography */
body.scene-start #startPanel .option{
  width:100% !important;
  min-height:156px !important;
  padding:18px 20px !important;
  border-radius:18px !important;
  background:#ffffff !important;
  border:1px solid rgba(15,23,42,.08) !important;
  box-shadow:0 14px 36px rgba(0,0,0,.12) !important;
  color:#0b1220 !important;
  font-size:20px !important;       /* title */
  font-weight:650 !important;
  line-height:1.35 !important;
  display:flex !important; align-items:flex-start !important; justify-content:space-between !important; gap:12px !important;
  position:relative !important; z-index:1 !important;
}
body.scene-start #startPanel .option small{
  display:block !important;
  margin-top:6px !important;
  font-size:15px !important;       /* subtitle */
  line-height:1.5 !important;
  color:#334155 !important; opacity:.95 !important;
}

/* Slim brand accent bar kept minimal & formal */
body.scene-start #startPanel .option::before{
  content:""; width:5px; height:62%; border-radius:6px;
  background:linear-gradient(180deg,var(--accent),var(--accent-2));
  margin-inline-end:12px;
}

/* Chevron subtle */
body.scene-start #startPanel .option::after{
  content:"›"; font-weight:900; font-size:22px; opacity:.35; margin-inline-start:auto; align-self:center;
}

/* Hover feedback */
body.scene-start #startPanel .option:hover{ transform:translateY(-2px); box-shadow:0 18px 44px rgba(0,0,0,.16) !important; }
body.scene-start #startPanel .option:active{ transform:none; }

/* ===== Replace previous start ornaments with a formal blueprint style ===== */
/* Remove older ornaments from v18k */
body.scene-start #startPanel .content::after{ content:none !important; background:none !important; }
/* Add subtle ECG grid blueprint */
body.scene-start #startPanel .content::before{
  content:"";
  position:absolute; inset:0; z-index:0; pointer-events:none;
  background:
    /* coarse grid */
    repeating-linear-gradient(0deg, rgba(2,6,23,.035) 0 1px, transparent 1px 32px),
    repeating-linear-gradient(90deg, rgba(2,6,23,.035) 0 1px, transparent 1px 32px);
  border-radius:inherit;
}
/* Add a faint coronary tree watermark bottom-right (single monochrome path) */
body.scene-start #startPanel .content > .watermark{ display:none; } /* no DOM change; precaution */

/* Use a pseudo overlay on the panel itself for the watermark */
body.scene-start #startPanel::after{
  content:"";
  position:absolute; right:28px; bottom:26px; width:180px; height:180px; z-index:0; pointer-events:none;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 160 160"><path d="M30 110 C40 70, 70 50, 95 45 C115 42, 125 55, 120 65 C110 84, 85 95, 72 110 C60 124, 58 134, 61 144 M96 46 C93 33, 98 24, 110 22 C126 20, 132 35, 124 48 M73 109 C55 107, 46 118, 45 130" fill="none" stroke="%230b1220" stroke-opacity="0.28" stroke-width="2.2" stroke-linecap="round"/></svg>') no-repeat center/contain;
  opacity:.55;
}

/* ===== Keep 4-choices & other scenes untouched ===== */
</style>


<style id="v18l-patch-red-font-ecg">
/* === Minimal patch per request (start menu only) === */

/* 1) Make the two start choices red-themed + larger Arabic text */
body.scene-start #startPanel .option{
  background:linear-gradient(90deg,var(--accent),var(--accent-2)) !important;
  color:#ffffff !important;
  border-color:rgba(225,29,72,.45) !important;
  font-size:22px !important;        /* larger main line */
  font-weight:700 !important;
}
body.scene-start #startPanel .option small{
  color:#ffffff !important; 
  opacity:.95 !important;
  font-size:17px !important;         /* larger subtitle */
}

/* 2) Make the ECG bigger on the start menu header only */
body.scene-start #startPanel header .ecg{
  height:230px !important;
  margin:10px auto !important;
}
body.scene-start #startPanel header .ecg svg{
  width:min(1350px, 98%) !important;
  height:100% !important;
}
</style>


<style id="custom-font-override">
/* Increase main button texts (من هو الدكتور هيمن؟, الأسئلة الشائعة) */
body.scene-start #startPanel .option {
  font-size:26px !important;   /* larger main text */
}

/* Increase subtitles (فيديو تعريفي قصير, اعرف ما يهمك...) */
body.scene-start #startPanel .option small {
  font-size:20px !important;   /* larger subtitle */
}

/* Increase FAQ panel heading (الأسئلة الشائعة at top) */
#faqPanel header h1 {
  font-size:34px !important;   /* larger FAQ title */
}
</style>


<style id="custom-center-options">
/* Center the texts inside the red choice boxes */
body.scene-start #startPanel .option{
  display:flex !important;
  flex-direction:column !important;
  align-items:center !important;
  justify-content:center !important;
  text-align:center !important;
  gap:6px !important;
  padding:24px 20px !important;   /* keeps touch target comfy */
}

/* Hide side accent bar & chevron so content is perfectly centered */
body.scene-start #startPanel .option::before,
body.scene-start #startPanel .option::after{
  display:none !important;
}

/* Ensure subtitle sits just below main line */
body.scene-start #startPanel .option small{
  display:block !important;
}
</style>





<style id="contact-modal-styles">
#contactModalBackdrop{
  position:fixed; inset:0; background:rgba(0,0,0,.55); z-index:60;
  display:none; align-items:center; justify-content:center;
}
#contactModalBackdrop.show{ display:flex; }
#contactModal{
  width:min(560px,92vw);
  background:linear-gradient(180deg,var(--glass-strong),rgba(255,255,255,.9));
  color:var(--ink); border:1px solid rgba(0,0,0,.08);
  border-radius:20px; box-shadow:0 24px 80px rgba(0,0,0,.35);
  padding:18px 18px 16px; padding-top:56px; direction:rtl; position:relative;
}
#contactModal h2{ margin:0 0 6px; font-size:22px; font-weight:900; color:#0b1220 }
#contactModal p{ margin:6px 0; font-size:16px; line-height:1.7 }
#contactModal .row{ display:flex; align-items:center; gap:.5rem; margin-top:.25rem; }
#contactModal .em{ font-weight:800; }
#contactModal .closeBtn{
  position:absolute; top:10px; inset-inline-start:10px;
  appearance:none; border:none; border-radius:999px; width:40px; height:40px;
  background:#fff; box-shadow:0 8px 24px rgba(0,0,0,.18); cursor:pointer; font-weight:900;
}
#contactModal .ctaWrap{ display:flex; gap:10px; margin-top:10px; flex-wrap:wrap; }
#contactModal .cta{
  appearance:none; border:none; border-radius:999px; padding:12px 16px; font-weight:900;
  background:linear-gradient(90deg,var(--accent),var(--accent-2)); color:#fff; cursor:pointer;
  box-shadow:0 12px 30px rgba(225,29,72,.28);
}
#contactModal a.cta{ text-decoration:none; display:inline-flex; align-items:center; }
</style>

<style id="contact-cyan-modal">
/* Cyan background for the Contact Us modal box */
#contactModal{
  background:linear-gradient(180deg,var(--cyan-glass-strong),var(--cyan-glass)) !important;
  border:1px solid var(--cyan-border) !important;
  color:#0b1220 !important;
}
#contactModal .closeBtn{
  background:#e6fafe !important;
}
</style>

<style id="cyan-menu-bg-only">
:root{
  --cyan-glass: rgba(6,182,212,.18);
  --cyan-glass-strong: rgba(6,182,212,.32);
  --cyan-border: rgba(6,182,212,.35);
}

/* Right-side panels (all sections) — swap white glass for cyan glass */
.panel{
  background:linear-gradient(180deg,var(--cyan-glass-strong),var(--cyan-glass)) !important;
  border-color:var(--cyan-border) !important;
}

/* Panel headers keep clarity but with subtle cyan tint */
.panel header{
  background:linear-gradient(180deg,rgba(6,182,212,.10),rgba(6,182,212,.06)) !important;
  border-color:rgba(6,182,212,.25) !important;
}

/* Scroll area background (so the "white area" behind lists becomes cyan) */
.panel .content{
  background:linear-gradient(180deg,rgba(6,182,212,.08),rgba(6,182,212,.04)) !important;
}

/* Keep cards/buttons as originally designed (red). Explicitly *avoid* changing: 
   .option, .list .q, .dialog .choice */
</style>
<style id="navy-choices-overrides">
:root{
  --navy1:#0b1f3b;   /* deep navy */
  --navy2:#1e3a8a;   /* indigo-800 */
  --navy-border:rgba(30,58,138,.55);
  --navy-shadow:0 14px 36px rgba(3,7,18,.35);
}

/* Start menu options (the big three cards) */
#startPanel .option,
.option{
  background:linear-gradient(135deg,var(--navy1),var(--navy2)) !important;
  color:#ffffff !important;
  border:1px solid var(--navy-border) !important;
  box-shadow:var(--navy-shadow) !important;
  text-shadow:0 1px 0 rgba(0,0,0,.18) !important;
}
#startPanel .option small,
.option small{ color:#ffffff !important; opacity:.95 !important; }

/* All-questions list items */
.list .q{
  background:linear-gradient(135deg,var(--navy1),var(--navy2)) !important;
  color:#ffffff !important;
  border:1px solid var(--navy-border) !important;
  box-shadow:var(--navy-shadow) !important;
}
.list .q small{ color:#ffffff !important; opacity:.95 !important; }

/* 4-choice dialog buttons */
.dialog .choice{
  background:linear-gradient(135deg,var(--navy1),var(--navy2)) !important;
  color:#ffffff !important;
  border:2px solid var(--navy-border) !important;
  box-shadow:var(--navy-shadow) !important;
  text-shadow:0 1px 0 rgba(0,0,0,.18) !important;
}

/* Hover/active subtle lift without color shift */
#startPanel .option:hover,
.option:hover,
.list .q:hover,
.dialog .choice:hover{
  filter:brightness(1.02) !important;
  transform:translateY(-1px) !important;
}
</style>

<style id="navy-start-fix">
/* Ensure navy theme for the 3 start-menu choices (match FAQ style) */
:root{
  --navy1: var(--faq-navy1, #0b1d3a);
  --navy2: var(--faq-navy2, #142f5e);
  --navy-border: var(--faq-navy-border, #0f2a4a);
  --navy-shadow: var(--faq-navy-shadow, 0 8px 18px rgba(9,22,45,.35));
}
/* Base cards */
body.scene-start #startPanel .option{
  background: linear-gradient(135deg, var(--navy1), var(--navy2)) !important;
  color: #fff !important;
  border: 1px solid var(--navy-border) !important;
  box-shadow: var(--navy-shadow) !important;
  text-shadow: 0 1px 0 rgba(0,0,0,.18) !important;
}
/* Subtext */
body.scene-start #startPanel .option small{
  color:#fff !important;
  opacity:.95 !important;
}
/* Hover/active feedback */
body.scene-start #startPanel .option:hover,
body.scene-start #startPanel .option:focus{
  filter: brightness(1.05) !important;
  transform: translateY(-1px);
}
body.scene-start #startPanel .option:active{
  filter: brightness(.98) !important;
  transform: translateY(0);
}
</style>

<style id="startmenu-tweaks-v5">
/* Hide the small captions under the three start choices */
#startPanel #introBtn small,
#startPanel #faqBtn small,
#startPanel #contactBtn small{
  display: none !important;
}

/* Make "تواصل معنا" white while others stay navy */
body.scene-start #startPanel #contactBtn.option{
  background: #ffffff !important;
  color: var(--navy2, #142f5e) !important;
  border: 1px solid rgba(15,42,74,.25) !important;
  box-shadow: 0 6px 16px rgba(0,0,0,.12) !important;
  text-shadow: none !important;
}
body.scene-start #startPanel #contactBtn.option:hover,
body.scene-start #startPanel #contactBtn.option:focus{
  filter: none !important;
  transform: translateY(-1px);
}
body.scene-start #startPanel #contactBtn.option:active{
  transform: translateY(0);
}
</style>

<style id="contact-choice-and-modal-v6">
/* Keep the start menu 'تواصل معنا' button navy like the others */
body.scene-start #startPanel #contactBtn.option{
  background: linear-gradient(135deg, var(--navy1, #0b1d3a), var(--navy2, #142f5e)) !important;
  color:#fff !important;
  border:1px solid var(--navy-border, #0f2a4a) !important;
  box-shadow: var(--navy-shadow, 0 8px 18px rgba(9,22,45,.35)) !important;
  text-shadow:0 1px 0 rgba(0,0,0,.18) !important;
}

/* Make the popup contact box background white */
#contactModal{
  background: #ffffff !important;
  color: #0b1220 !important;
  border: 1px solid rgba(0,0,0,.08) !important;
  box-shadow: 0 24px 80px rgba(0,0,0,.35) !important;
}

/* Optional: keep the cyan accent for the close button border only (subtle) */
#contactModal .closeBtn{
  background:#fff !important;
  color:#0b1220 !important;
  border:1px solid rgba(0,0,0,.08) !important;
}
</style>

<style id="faq-list-font-bump-v1">
/* Larger question text in the All Questions list */
.list .q{
  font-size: 22px !important; /* was ~18px */
}
</style>


<style id="contact-and-faq-clarity-v8">
/* ===== 1) CONTACT POP-UP: bigger, clearer ===== */
#contactModal{
  width: min(760px, 96vw) !important;
  padding: 28px 28px 26px !important;
  border-radius: 22px !important;
}
#contactModal h2{
  font-size: 30px !important;
  line-height: 1.25 !important;
  font-weight: 900 !important;
  margin-bottom: 10px !important;
}
#contactModal p{
  font-size: 19px !important;
  line-height: 1.9 !important;
  margin: 10px 0 !important;
}
#contactModal .em{
  font-size: 21px !important;
  font-weight: 900 !important;
}
#contactModal .row{ gap: .75rem !important; }
#contactModal .closeBtn{
  width: 44px !important; height: 44px !important; font-size: 22px !important;
  box-shadow: 0 10px 28px rgba(0,0,0,.22) !important;
}

/* ===== 2) FAQ — All Questions: number + spacing ===== */
#faqPanel .list{
  counter-reset: qnum;
  gap: 16px !important;          /* add space between boxes */
  padding-bottom: 22px !important;
}
#faqPanel .list .q{
  position: relative !important;
  padding-inline-start: 64px !important;   /* room for the number badge (RTL aware) */
  min-height: 56px !important;
  border-radius: 18px !important;
}
/* Circular number badge (RTL-aware: sits at inline-start which is the right edge in RTL) */
#faqPanel .list .q::before{
  counter-increment: qnum;
  content: counter(qnum);
  position: absolute; inset-inline-start: 16px; top: 50%;
  transform: translateY(-50%);
  width: 36px; height: 36px; border-radius: 999px;
  display: grid; place-items: center;
  font-weight: 900; font-size: 18px;
  background: #ffffff; color: var(--ink);
  box-shadow: 0 10px 24px rgba(0,0,0,.20);
  border: 1px solid rgba(0,0,0,.06);
}
/* Slightly larger question text for readability */
#faqPanel .list .q span, 
#faqPanel .list .q{ font-size: 22px !important; line-height: 1.55 !important; }

/* Ensure nice focus ring for keyboard users */
#faqPanel .list .q:focus-visible{
  outline: 3px solid rgba(6,182,212,.6) !important;
  outline-offset: 2px !important;
  border-color: rgba(6,182,212,.7) !important;
}
</style>

<style id="contact-modal-polish-and-anim-v9">
/* Keep the close button clear of the title */
#contactModal{
  position: relative;
  padding-top: 56px !important;           /* extra headroom for the close button */
}
#contactModal h2{
  padding-inline-end: 68px !important;    /* reserve space so the '×' never overlaps the text */
}
#contactModal .closeBtn{
  position: absolute !important;
  inset-inline-end: 16px !important;      /* push a bit further to the right (RTL-aware) */
  top: 12px !important;
  z-index: 2 !important;
}

/* Fancy open animation */
#contactModalBackdrop{ opacity: 0; transition: opacity .25s ease; }
#contactModal{ opacity: 0; transform: translateY(12px) scale(.96); transition: opacity .35s cubic-bezier(.2,.7,.2,1), transform .35s cubic-bezier(.2,.7,.2,1); }

/* When shown, fade the backdrop and pop the modal in */
#contactModalBackdrop.show{ opacity: 1; }
#contactModalBackdrop.show #contactModal{ opacity: 1; transform: translateY(0) scale(1); }

/* Optional: subtle entrance keyframes for browsers that prefer animations */
@keyframes popIn {
  from { opacity: 0; transform: translateY(12px) scale(.96); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to   { opacity: 1; }
}
#contactModalBackdrop.show{ animation: fadeIn .25s ease both; }
#contactModalBackdrop.show #contactModal{ animation: popIn .35s cubic-bezier(.2,.7,.2,1) both; }
</style>

<style id="contact-close-anim-v10">
/* Closing state: fade + slight drop */
#contactModalBackdrop.closing{ animation: fadeOut .25s ease both; }
#contactModalBackdrop.closing #contactModal{ animation: popOut .30s cubic-bezier(.2,.7,.2,1) both; }

@keyframes popOut {
  from { opacity: 1; transform: translateY(0) scale(1); }
  to   { opacity: 0; transform: translateY(10px) scale(.98); }
}
@keyframes fadeOut {
  from { opacity: 1; }
  to   { opacity: 0; }
}
</style>

<style id="contact-close-anim-v11">
/* Keep layout during closing so animation is visible */
#contactModalBackdrop.show.closing{ display:flex !important; }
/* Performance hint */
#contactModal{ will-change: transform, opacity; }
</style>
</head>
<body class="scene-start">
  <!-- Backgrounds -->
  <img class="bg bg-start" src="Screenshot%20(17).png" alt="الخلفية الرئيسية بالصورة المرفقة">
  <img class="bg bg-faq"   src="Screenshot%20(13).png" alt="خلفية واجهة الأسئلة">
  <div class="veil" aria-hidden="true"></div>
  <div id="portal" class="portal" aria-hidden="true"></div>

  <!-- Brand -->
  <a class="brand" href="#" aria-label="DHF — Dr Hemn’s Heart Foundation">
    <img id="brandLogo" src="logo.jpg" alt="DHF Logo">
    <div class="txt"><b>DHF</b><span>Dr Hemn’s Heart Foundation</span></div>
  </a>
  <!-- Ornaments -->
  <div class="ornaments" aria-hidden="true">
    <svg class="heart deco" viewBox="0 0 24 24"><path d="M12 21s-6.7-4.3-9.3-7C.4 11.6 1 8.2 3.4 6.7c1.9-1.2 4.4-.7 5.9.9L12 9.3l2.7-1.7c1.5-1.6 4-2.1 5.9-.9 2.4 1.5 3 4.9.7 7.3C18.7 16.7 12 21 12 21z" fill="rgba(225,29,72,.22)"/></svg>
    <svg class="scalpel deco" viewBox="0 0 24 24"><path d="M3 19l6-6 3 3-6 6H3v-3zM21 4l-8.5 8.5-3-3L18 1l3 3z" fill="rgba(11,18,32,.18)"/></svg>
  
    <!-- Added cardiac-surgery themed ornaments (stent & suture needle) -->
    <svg class="stent deco" viewBox="0 0 64 16" aria-hidden="true">
      <path d="M2 8 Q8 2 14 8 T26 8 T38 8 T50 8 T62 8" fill="none" stroke="rgba(225,29,72,.22)" stroke-width="2"/>
      <path d="M2 8 Q8 14 14 8 T26 8 T38 8 T50 8 T62 8" fill="none" stroke="rgba(225,29,72,.22)" stroke-width="2"/>
    </svg>
    <svg class="needle deco" viewBox="0 0 64 64" aria-hidden="true">
      <path d="M5 40 Q32 8 59 16" fill="none" stroke="rgba(11,18,32,.25)" stroke-width="3" stroke-linecap="round"/>
      <path d="M59 16 l-10 -4 l6 9 z" fill="rgba(11,18,32,.25)"/>
    </svg>

  </div>


  <!-- Start panel (right side) -->
  <aside id="startPanel" class="panel active" aria-label="البداية">
    <header>
      <h1>أهلاً بك 👋</h1>
      <!-- ECG: EXACT path & mask from the original start menu -->
      <div class="ecg" aria-hidden="true">
        <svg viewBox="0 0 960 200" preserveAspectRatio="none" role="img" aria-label="مخطط نبض">
          <defs>
            <linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#e11d48"/>
              <stop offset="100%" stop-color="#fb7185"/>
            </linearGradient>
            <mask id="reveal"><rect class="scan" x="-240" y="0" width="240" height="200" fill="#fff" /></mask>
          </defs>
          <path d="M180,140 L260,140 L280,80 L300,140 L360,140 L380,140 L400,100 L420,140 L440,140 L460,60 L480,140 L540,140 L560,80 L580,140 L640,140 L660,110 L680,140 L740,140 L760,80 L780,140 L840,140"
                fill="none" stroke="#64748b" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          <path class="sweep" d="M180,140 L260,140 L280,80 L300,140 L360,140 L380,140 L400,100 L420,140 L440,140 L460,60 L480,140 L540,140 L560,80 L580,140 L640,140 L660,110 L680,140 L740,140 L760,80 L780,140 L840,140"
                fill="none" stroke="url(#g)" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
    </header>
    <div class="content">
      <button id="introBtn" class="option">من هو الدكتور هيمن؟<small>فيديو تعريفي قصير</small></button>
      <button id="faqBtn" class="option">الأسئلة الشائعة<small>اعرف ما يهمك حول الإجراء وخطواته</small></button>
      <button id="contactBtn" class="option">تواصل معنا<small>للاستفسار والحجز عبر الاتصال أو واتساب</small></button>
    </div>
  </aside>

  <!-- FAQ panel (right side) -->
  <aside id="faqPanel" class="panel" aria-label="الأسئلة الشائعة">
    <header>
      <h1>الأسئلة الشائعة</h1>
      <!-- SAME ECG block copied verbatim for accuracy -->
      <div class="ecg" aria-hidden="true">
        <svg class="ecg" viewBox="0 0 960 200" preserveAspectRatio="none" role="img" aria-label="مخطط نبض">
          <defs>
            <linearGradient id="g" x1="0%" y1="0%" x2="100%" y2="0%">
              <stop offset="0%" stop-color="#e11d48"/>
              <stop offset="100%" stop-color="#fb7185"/>
            </linearGradient>
            <mask id="reveal"><rect class="scan" x="-240" y="0" width="240" height="200" fill="#fff" /></mask>
          </defs>
          <path d="M180,140 L260,140 L280,80 L300,140 L360,140 L380,140 L400,100 L420,140 L440,140 L460,60 L480,140 L540,140 L560,80 L580,140 L640,140 L660,110 L680,140 L740,140 L760,80 L780,140 L840,140"
                fill="none" stroke="#64748b" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"/>
          <path class="sweep" d="M180,140 L260,140 L280,80 L300,140 L360,140 L380,140 L400,100 L420,140 L440,140 L460,60 L480,140 L540,140 L560,80 L580,140 L640,140 L660,110 L680,140 L740,140 L760,80 L780,140 L840,140"
                fill="none" stroke="url(#g)" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </div>
      <div class="toolbar">
        <button id="btnShowAll" class="btn">عرض جميع الأسئلة</button>
        <button id="btnShowChoices" class="btn" disabled>عرض ٤ خيارات</button>
        <button id="btnBackToStart" class="btn">الرجوع للبداية</button>
      </div>
    </header>
    <div class="content">
      <div id="listWrap" class="listWrap" aria-hidden="true">
        <ul id="list" class="list" role="listbox" aria-label="جميع الأسئلة"></ul>
      </div>
    </div>
  </aside>

  <!-- Bottom dialog choices (overlay on background base) -->
  <div id="dialog" class="dialog" aria-label="خيارات الأسئلة (٤)">
    <div id="dialogWrap" class="wrap"></div>
  </div>

  <!-- Player overlay -->
  <div id="playerWrap" class="player" role="dialog" aria-label="تشغيل الفيديو">
    <video id="player" playsinline webkit-playsinline controls preload="metadata"></video>
  </div>

  <!-- Floating controls during playback -->
  <div class="controls">
    <button id="replay" class="btn" type="button" aria-label="إعادة تشغيل">إعادة تشغيل</button>
    <button id="back" class="btn" type="button" aria-label="إغلاق الفيديو">إغلاق</button>
    <button id="home" class="btn" type="button" aria-label="رجوع للبداية">البداية</button>
  </div>

  <script>
    /* ===== Data ===== */
    const FAQ = [
      { id:'q1',  q:'ما هو انسداد الشرايين التاجية؟',                               src:'3r.mp4',  next:['q2','q3','q4','q5','q6'] },
      { id:'q2',  q:'ما هي الأعراض الشائعة لانسداد الشرايين؟',                     src:'4r.mp4',  next:['q3','q5','q13','q14'] },
      { id:'q3',  q:'ما هي نسبة انتشار انسداد الشرايين؟',                           src:'5r.mp4',  next:['q2','q4','q5','q6'] },
      { id:'q4',  q:'لماذا أُصبت بانسداد الشرايين التاجية؟',                        src:'6r.mp4',  next:['q5','q6','q12','q13'] },
      { id:'q5',  q:'ما العلاجات غير الجراحية المتوفرة؟',                          src:'7r.mp4',  next:['q6','q7','q8'] },
      { id:'q6',  q:'ما الطرق الجراحية لزراعة الشرايين (CABG)؟',                    src:'8r.mp4',  next:['q7','q8','q12'] },
      { id:'q7',  q:'لماذا الجراحة بالناظور بديل أفضل لفتح الصدر؟',                 src:'9r.mp4',  next:['q8','q9','q10','q11'] },
      { id:'q8',  q:'مقارنة الجراحة بالناظور مع القسطرة والأدوية؟',                 src:'10r.mp4', next:['q12','q9','q10'] },
      { id:'q9',  q:'مدة العملية؟',                                                 src:'11r.mp4', next:['q10','q11','q12'] },
      { id:'q10', q:'مدة البقاء في المستشفى؟',                                       src:'12r.mp4', next:['q11','q12','q14'] },
      { id:'q11', q:'مدة التعافي الكامل؟',                                          src:'13r.mp4', next:['q12','q14'] },
      { id:'q12', q:'ما هي مخاطر العملية؟',                                         src:'14r.mp4', next:['q13','q14'] },
      { id:'q13', q:'التحضيرات قبل العملية؟',                                       src:'15r.mp4', next:['q9','q10','q11'] },
      { id:'q14', q:'الحياة بعد العملية؟',                                           src:'16r.mp4', next:['q11'] },
      { id:'q15', q:'هل يمكن أن يعود الانسداد؟', src:'17r.mp4', next:['q5','q6','q12','q19'] },
      { id:'q16', q:'هل العملية مؤلمة؟', src:'18r.mp4', next:['q9','q11','q14','q19'] },
      { id:'q17', q:'هل يبقى أثر الجرح؟', src:'19r.mp4', next:['q7','q10','q11','q16'] },
      { id:'q18', q:'هل أحتاج لنقل دم؟', src:'20r.mp4', next:['q12','q13','q14','q9'] },
      { id:'q19', q:'متى أستطيع السفر؟', src:'21r.mp4', next:['q10','q11','q14'] },
      { id:'q20', q:'الحياة الزوجية؟', src:'22r.mp4', next:['q11','q14','q19'] },
      { id:'q21', q:'ماذا لو لم أُجري العملية؟', src:'23r.mp4', next:['q12','q5','q6'] }];
    const byId = Object.fromEntries(FAQ.map(x=>[x.id,x]));
    const START_CHOICES = ['q1','q5','q6','q7'];   // initial 4
    const allIds = FAQ.map(x=>x.id);

    /* ===== Elements ===== */
    const body   = document.body;
    const startPanel = document.getElementById('startPanel');
    const faqPanel = document.getElementById('faqPanel');
    const introBtn = document.getElementById('introBtn');
    const faqBtn = document.getElementById('faqBtn');

    const listWrap = document.getElementById('listWrap');
    const list = document.getElementById('list');
    const dialog = document.getElementById('dialog');
    const dialogWrap = document.getElementById('dialogWrap');
    const portal = document.getElementById('portal');

    const btnShowAll = document.getElementById('btnShowAll');
    const btnShowChoices = document.getElementById('btnShowChoices');
    const btnBackToStart = document.getElementById('btnBackToStart');

    const playerWrap = document.getElementById('playerWrap');
    const player = document.getElementById('player');
    const replay = document.getElementById('replay');
    const back = document.getElementById('back');
    const home = document.getElementById('home');
    /* ===== FAB controls ===== */
    const fabWrap = document.getElementById('fabWrap');
    const fabBack = document.getElementById('fabBack');
    const fabMenu = document.getElementById('fabMenu');
    if(fabBack && fabMenu){
      fabBack.addEventListener('click', (ev)=>{ ripple(fabBack, ev); activateStart(ev); });
      fabMenu.addEventListener('click', (ev)=>{ ripple(fabMenu, ev); setMode('list'); });
    }


    /* ===== Ripple ===== */
    function ripple(el, ev){
      const r = document.createElement('span'); r.className='ripple';
      const rect = el.getBoundingClientRect();
      const size = Math.max(rect.width, rect.height);
      const x = (ev ? ev.clientX - rect.left : rect.width/2) - size/2;
      const y = (ev ? ev.clientY - rect.top  : rect.height/2) - size/2;
      r.style.width = r.style.height = size + 'px'; r.style.left = x + 'px'; r.style.top = y + 'px';
      el.appendChild(r); setTimeout(()=> r.remove(), 600);
    }

    /* ===== Portal transition helpers ===== */
    function showPortal(ev){
      const x = ev ? (ev.clientX/window.innerWidth*100)+'%' : '50%';
      const y = ev ? (ev.clientY/window.innerHeight*100)+'%' : '50%';
      portal.style.setProperty('--x', x); portal.style.setProperty('--y', y);
      portal.classList.remove('hide'); portal.classList.add('show');
    }
    function hidePortal(){ portal.classList.remove('show'); portal.classList.add('hide'); setTimeout(()=> portal.classList.remove('hide'), 700) }

    function activateStart(ev){
      showPortal(ev);
      setTimeout(()=>{
        body.classList.add('scene-start'); body.classList.remove('scene-faq');
        faqPanel.classList.remove('active');
        startPanel.classList.add('active');
        setMode('none');
        hidePortal();
      }, 260);
    }
    function activateFAQ(ev){
      showPortal(ev);
      setTimeout(()=>{
        body.classList.remove('scene-start'); body.classList.add('scene-faq');
        startPanel.classList.remove('active');
        
        // Reset visited & unseen queue on entering FAQ
        try{ visited.clear(); }catch(e){}
        if (Array.isArray(allIds)) unseenQueue = allIds.slice();
// Start with 4 bottom choices only; hide right panel
        setMode('choices');
        renderChoices(START_CHOICES);
        renderListAll();
        hidePortal();
      }, 260);
    }
    /* ===== List & choices rendering ===== */
        function renderListAll(){
      list.classList.remove('ready');
      list.innerHTML='';
      FAQ.forEach((item,i)=>{
        const b = document.createElement('button');
        b.type='button'; b.className='q'; b.style.transitionDelay = `${i*18}ms`;
        b.dataset.id=item.id; b.dataset.src=item.src;
        b.innerHTML = `<span>${item.q}</span>`;
        b.addEventListener('click', (ev)=> play(item.id, ev));
        list.appendChild(b);
      });
      // 'ready' toggled later in setMode('list')
    }

    function renderChoices(ids){
      dialog.classList.remove('ready'); dialogWrap.innerHTML='';
      ids.slice(0,4).forEach((id,i)=>{
        const item = byId[id]; if(!item) return;
        const b = document.createElement('button');
        b.type='button'; b.className='choice'; b.style.transitionDelay = `${i*60}ms`;
        b.dataset.id=item.id; b.dataset.src=item.src;
        b.innerHTML = `<span>${item.q}</span>`;
        b.addEventListener('click', (ev)=> play(item.id, ev));
        dialogWrap.appendChild(b);
      });
      requestAnimationFrame(()=> dialog.classList.add('ready'));
    }

    /* ===== View mode toggle (choices vs list) ===== */
    let mode = 'choices'; // 'choices' | 'list' | 'none'
    function setMode(m){
                  mode = m;
      // reflect mode on <body> for CSS targeting
      body.classList.remove('mode-choices','mode-list','mode-none');
      if(mode === 'list'){
        body.classList.add('mode-list');
        // show right panel + full list; hide bottom dialog + FABs (CSS handles FABs)
        faqPanel.classList.add('active');
        dialog.classList.add('hidden');
        listWrap.classList.add('open'); listWrap.setAttribute('aria-hidden','false');
        btnShowAll.setAttribute('disabled',''); btnShowChoices.removeAttribute('disabled');
        // Trigger stagger animation for list
        list.classList.remove('ready');
        requestAnimationFrame(()=> requestAnimationFrame(()=> list.classList.add('ready')));
      } else if (mode === 'choices'){
        body.classList.add('mode-choices');
        // hide right panel, show bottom 4
        faqPanel.classList.remove('active');
        dialog.classList.remove('hidden');
        listWrap.classList.remove('open'); listWrap.setAttribute('aria-hidden','true');
        btnShowChoices.setAttribute('disabled',''); btnShowAll.removeAttribute('disabled');
      } else { // none
        body.classList.add('mode-none');
        faqPanel.classList.remove('active');
        dialog.classList.add('hidden');
        listWrap.classList.remove('open'); listWrap.setAttribute('aria-hidden','true');
        btnShowAll.removeAttribute('disabled'); btnShowChoices.removeAttribute('disabled');
      }
    }
    btnShowAll.addEventListener('click', (ev)=>{ ripple(btnShowAll,ev); setMode('list'); });
    btnShowChoices.addEventListener('click', (ev)=>{ ripple(btnShowChoices,ev); setMode('choices'); });
    btnBackToStart.addEventListener('click', activateStart);

    /* ===== 4-follow-up logic (always 4, unvisited-first) ===== */
    const visited = new Set();
    let lastCurrent = null;

    let unseenQueue = [];


    function computeNextChoices(currentId){
      // Mark current as visited
      if(currentId){ visited.add(currentId); lastCurrent = currentId; }

      // Ensure unseen queue seeded (exclude current & already visited)
      if(!Array.isArray(unseenQueue) || unseenQueue.length === 0){
        unseenQueue = allIds.filter(id => id !== currentId && !visited.has(id));
      } else {
        // Keep it clean
        unseenQueue = unseenQueue.filter(id => id !== currentId && !visited.has(id));
      }

      const currentNext = (byId[currentId]?.next || []).filter(id => id !== currentId);

      // 1) Prioritize unvisited items the author linked via 'next'
      const out = [];
      for(const id of currentNext){
        if(out.length >= 4) break;
        if(!visited.has(id) && !out.includes(id)) out.push(id);
      }

      // 2) Fill remaining slots from the global unseenQueue, in order
      for(const id of unseenQueue){
        if(out.length >= 4) break;
        if(!out.includes(id)) out.push(id);
      }
      // Remove any used from the queue
      unseenQueue = unseenQueue.filter(id => !out.includes(id));

      // 3) If we've shown everything (queue empty + all visited), soft-reset (avoid repeating current immediately)
      const allVisited = visited.size >= allIds.length;
      if(out.length < 4 && allVisited){
        const keep = lastCurrent || currentId || null;
        visited.clear();
        if(keep) visited.add(keep);
        unseenQueue = allIds.filter(id => id !== keep);
        for(const id of unseenQueue){
          if(out.length >= 4) break;
          if(!out.includes(id)) out.push(id);
        }
        unseenQueue = unseenQueue.filter(id => !out.includes(id));
      }

      // 4) Edge case: if total < 4 or still short, fill deterministically from allIds
      if(out.length < 4){
        for(const id of allIds){
          if(out.length >= 4) break;
          if(id !== currentId && !out.includes(id)) out.push(id);
        }
      }

      return out.slice(0,4);
    }/* ===== Video playback ===== */
    async function play(id, ev){
      const item = byId[id]; if(!item) return;
      const btn = [...document.querySelectorAll('.choice,.q')].find(el=> el.dataset.id===id);
      if(btn) ripple(btn, ev);

      try{
        const url = item.src;
        if(player.src !== new URL(url, location.href).href){ player.src = url; } else { player.currentTime = 0; }
        await player.load();
        await Promise.race([ new Promise(res => player.addEventListener('canplay', res, { once:true })), new Promise(res => setTimeout(res, 900)) ]);
        playerWrap.classList.add('active'); body.classList.add('playing');
        await player.play().catch(()=>{});
      }catch(e){
        console.error(e); playerWrap.classList.add('active'); body.classList.add('playing');
      }

      // Prepare next choices (always 4)
      play._next = computeNextChoices(id);
    }

    function closePlayer(showNext=true){
      if(!player.paused){ player.pause(); }
      playerWrap.classList.remove('active'); body.classList.remove('playing');
      if(showNext && play._next){ renderChoices(play._next); }
    }
    replay.addEventListener('click', ()=>{ if(player.readyState>0){ player.currentTime = 0; player.play(); }});
    back.addEventListener('click', ()=> closePlayer(false));
    home.addEventListener('click', (ev)=>{ closePlayer(false); activateStart(ev); });
    player.addEventListener('ended', ()=> closePlayer(true));

    /* ===== Wire start buttons ===== */
    introBtn.addEventListener('click', (ev)=>{ ripple(introBtn, ev); playIntro('test.mp4'); });
    faqBtn.addEventListener('click',  (ev)=>{ ripple(faqBtn, ev);  activateFAQ(ev); });

    async function playIntro(src='test.mp4'){
      try{
        if(player.src !== new URL(src, location.href).href){ player.src = src; } else { player.currentTime = 0; }
        await player.load();
        await Promise.race([ new Promise(res => player.addEventListener('canplay', res, { once:true })), new Promise(res => setTimeout(res, 900)) ]);
        playerWrap.classList.add('active'); body.classList.add('playing');
        await player.play().catch(()=>{});
      }catch(e){ console.error(e); playerWrap.classList.add('active'); body.classList.add('playing'); }
    }

    // Init
    window.addEventListener('load', ()=>{
      body.classList.add('scene-start'); startPanel.classList.add('active');
      setMode('none');
    });
    
    // ===== Delegated handlers (ensures FAB works even if injected after script) =====
    document.addEventListener('click', (ev)=>{
      const btn = ev.target.closest('#fabBack, #fabMenu');
      if(!btn) return;
      try{ ripple(btn, ev); }catch(e){}
      if(btn.id === 'fabBack'){ activateStart(ev); }
      else if(btn.id === 'fabMenu'){ setMode('list'); }
    });

    document.addEventListener('keydown', (e)=>{
      if(e.key === 'Escape' && document.body.classList.contains('playing')) closePlayer(false);
    });
  
    // ===== Contact modal wiring =====
    const contactBtn = document.getElementById('contactBtn');
    const backdrop   = document.getElementById('contactModalBackdrop');
    const closeBtn   = backdrop ? backdrop.querySelector('.closeBtn') : null;
    function openContact(ev){
      try{ if(contactBtn) ripple(contactBtn, ev); }catch(e){}
      backdrop?.classList.add('show');
    }
    function closeContact(){
      if(!backdrop) return;
      // Add closing class to trigger animation
      backdrop.classList.add('closing');
      // After animation end (or fallback timeout), hide
      var done = false;
      function finish(){
        if(done) return; done = true;
        backdrop.classList.remove('show','closing');
      }
      // Listen for animation end on the modal; fallback after 400ms
      var modal = backdrop.querySelector('#contactModal');
      if(modal){
        modal.addEventListener('animationend', finish, { once: true });
      }
      backdrop.addEventListener('animationend', finish, { once: true });
      setTimeout(finish, 420);
    }
    contactBtn?.addEventListener('click', openContact);
    closeBtn?.addEventListener('click', closeContact);
    backdrop?.addEventListener('click', (e)=>{ if(e.target === backdrop) closeContact(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeContact(); });
    </script>


  <!-- Floating controls visible only in FAQ 'choices' mode -->
  <div id="fabWrap" class="fabWrap" aria-hidden="true">
    <button id="fabBack" class="fab" title="الرجوع للبداية">⟵</button>
    <button id="fabMenu" class="fab" title="عرض جميع الأسئلة">☰</button>
  </div>

  


<div id="contactModalBackdrop" role="dialog" aria-modal="true" aria-labelledby="contactTitle">
  <div id="contactModal">
    <button class="closeBtn" type="button" aria-label="إغلاق">×</button>
    <h2 id="contactTitle">تواصل معنا</h2>
    <p>فريقنا في خدمة المراجعين ينتظر سؤالك.</p>
    <p>تواصل معنا الآن لمعرفة إذا كنت مؤهلاً للعملية (اتصال + واتساب).</p>
    <p class="em">للحجز أو الاستفسار: <span dir="ltr">07732069090</span></p>
    <p>📍 مستشفى ارژين - شارع 100م - مقابل فاملي مول - اربيل - العراق</p>
</div>
</div>


<script id="contact-modal-init">
(function(){
  function init(){
    var btn = document.getElementById('contactBtn');
    var backdrop = document.getElementById('contactModalBackdrop');
    if(!btn || !backdrop) return;

    var closeBtn = backdrop.querySelector('.closeBtn');

    function openContact(ev){
      try{ if(window.ripple) ripple(btn, ev); }catch(e){}
      backdrop.classList.remove('closing');
      backdrop.classList.add('show');
    }
    function closeContact(){
      if(!backdrop) return;
      // trigger closing animation
      backdrop.classList.add('closing');
      // ensure it's visible during closing
      if(!backdrop.classList.contains('show')) backdrop.classList.add('show');
      let done = false;
      const modal = backdrop.querySelector('#contactModal');
      function finish(){
        if(done) return; done = true;
        backdrop.classList.remove('closing','show');
      }
      // whichever fires first wins
      if(modal) modal.addEventListener('animationend', finish, { once:true });
      backdrop.addEventListener('animationend', finish, { once:true });
      // fallback timeout
      setTimeout(finish, 500);
    }

    btn.addEventListener('click', openContact);
    if(closeBtn) closeBtn.addEventListener('click', closeContact);
    backdrop.addEventListener('click', function(e){ if(e.target === backdrop) closeContact(); });
    document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closeContact(); });
  }
  if(document.readyState === 'loading'){
    document.addEventListener('DOMContentLoaded', init);
  }else{
    init();
  }
})();
</script>

</body>
</html>